# סיכום בדיקות JSON ב-Postman

## סקירה כללית

אוסף Postman עודכן עם בדיקות JSON מקיפות לכל ה-endpoints בשרת. כל בקשה כוללת בדיקות אוטומטיות שמאמתות את התגובה.

## סוגי בדיקות שנוספו

### 1. בדיקות סטטוס קוד
- ✅ בדיקת קוד סטטוס תקין (200, 201, 400, 401, 404, 409, 500)
- ✅ בדיקת זמן תגובה (פחות מ-2000ms)

### 2. בדיקות מבנה תגובה
- ✅ בדיקת נוכחות שדות חובה
- ✅ בדיקת מבנה אובייקטים (user, property, error)
- ✅ בדיקת סוגי נתונים (string, number, array, object)

### 3. בדיקות לוגיקה עסקית
- ✅ בדיקת תקינות נתונים (מחיר חיובי, סטטוס תקין)
- ✅ בדיקת עדכון נתונים (שדות אכן השתנו)
- ✅ בדיקת אבטחה (אין סיסמה בתגובה)

### 4. בדיקות שגיאות
- ✅ בדיקת שגיאות אימות (401)
- ✅ בדיקת שגיאות ולידציה (400)
- ✅ בדיקת שגיאות לא נמצא (404)
- ✅ בדיקת שגיאות התנגשות (409)

## פירוט בדיקות לפי קטגוריה

### 🔐 Authentication (אימות)

#### הרשמה - Register
- ✅ סטטוס 201
- ✅ מבנה תגובה תקין (message, user, token)
- ✅ שדות משתמש (id, name, email)
- ✅ סוגי נתונים תקינים
- ✅ טוקן לא ריק
- ✅ שמירת משתנים לסביבה

#### הרשמה - שגיאת אימייל קיים
- ✅ סטטוס 409
- ✅ הודעת שגיאה מתאימה

#### הרשמה - שדות חסרים
- ✅ סטטוס 400
- ✅ הודעת שגיאה

#### התחברות - Login
- ✅ סטטוס 200
- ✅ מבנה תגובה תקין
- ✅ טוקן תקין
- ✅ שמירת משתנים

#### התחברות - סיסמה שגויה
- ✅ סטטוס 401
- ✅ הודעת שגיאה

#### התנתקות - Logout
- ✅ סטטוס 200
- ✅ הודעת הצלחה

#### רשימת משתמשים - List Users
- ✅ סטטוס 200
- ✅ מבנה תגובה (count, users)
- ✅ users הוא מערך
- ✅ count תואם לאורך המערך

### 🏠 Properties (נכסים)

#### קבלת כל הנכסים - Get All Properties
- ✅ סטטוס 200
- ✅ מבנה תגובה (count, properties)
- ✅ properties הוא מערך
- ✅ count תואם לאורך המערך
- ✅ מבנה נכס (אם יש נכסים)
- ✅ סוגי נתונים של נכס

#### קבלת נכסים - ללא אימות
- ✅ סטטוס 401
- ✅ הודעת שגיאה

#### הוספת נכס חדש - Create Property
- ✅ סטטוס 201
- ✅ מבנה תגובה (message, property)
- ✅ כל שדות הנכס קיימים
- ✅ סוגי נתונים תקינים
- ✅ מחיר חיובי
- ✅ סטטוס תקין (זמין/נמכר)
- ✅ שמירת מזהה נכס

#### הוספת נכס - שדות חסרים
- ✅ סטטוס 400
- ✅ הודעת שגיאה

#### הוספת נכס - מחיר לא תקין
- ✅ סטטוס 400
- ✅ הודעת שגיאה על מחיר

#### עדכון נכס - Update Property
- ✅ סטטוס 200
- ✅ מבנה תגובה תקין
- ✅ נכס אכן עודכן

#### עדכון נכס - נכס לא נמצא
- ✅ סטטוס 404
- ✅ הודעת שגיאה

#### מחיקת נכס - Delete Property
- ✅ סטטוס 200
- ✅ מבנה תגובה תקין
- ✅ מזהה נכס בתגובה

#### מחיקת נכס - נכס לא נמצא
- ✅ סטטוס 404
- ✅ הודעת שגיאה

### 👤 Users (משתמשים)

#### קבלת פרטי משתמש - Get Me
- ✅ סטטוס 200
- ✅ מבנה תגובה (user)
- ✅ שדות חובה קיימים
- ✅ אין סיסמה בתגובה
- ✅ מזהה משתמש תואם

#### קבלת פרטי משתמש - ללא אימות
- ✅ סטטוס 401

#### עדכון פרטי משתמש - Update Me
- ✅ סטטוס 200
- ✅ מבנה תגובה תקין
- ✅ משתמש אכן עודכן
- ✅ אין סיסמה בתגובה

#### עדכון משתמש - אימייל קיים
- ✅ סטטוס 409
- ✅ הודעת שגיאה

#### מחיקת משתמש - Delete Me
- ✅ סטטוס 200
- ✅ מבנה תגובה תקין
- ✅ אין סיסמה בתגובה

### 🏠 Root & Health

#### Root Endpoint - בדיקת שרת
- ✅ סטטוס 200
- ✅ מבנה תגובה (message, status, endpoints)
- ✅ כל קבוצות הנתיבים קיימות

#### 404 - נתיב לא קיים
- ✅ סטטוס 404
- ✅ הודעת שגיאה

## משתני סביבה

האוסף משתמש במשתני סביבה הבאים:
- `base_url` - כתובת השרת (ברירת מחדל: http://localhost:5000)
- `token` - טוקן אימות (נשמר אוטומטית)
- `user_id` - מזהה משתמש (נשמר אוטומטית)
- `user_email` - אימייל משתמש (נשמר אוטומטית)
- `property_id` - מזהה נכס (נשמר אוטומטית)

## איך להשתמש

1. **ייבוא האוסף ל-Postman:**
   - פתח Postman
   - לחץ על Import
   - בחר את הקובץ `Postman_Collection.json`

2. **הגדרת סביבה:**
   - צור סביבה חדשה ב-Postman
   - הוסף משתנה `base_url` עם הערך `http://localhost:5000`
   - בחר את הסביבה לפני הרצת הבקשות

3. **הרצת בדיקות:**
   - הרץ את הבקשות בסדר:
     1. הרשמה (Register)
     2. התחברות (Login)
     3. הוספת נכס (Create Property)
     4. עדכון נכס (Update Property)
     5. מחיקת נכס (Delete Property)
   - כל בדיקה תרוץ אוטומטית ותראה תוצאות ב-Test Results

4. **צפייה בתוצאות:**
   - כל בקשה מציגה את תוצאות הבדיקות בתחתית המסך
   - בדיקות שעברו מסומנות ב-✓ ירוק
   - בדיקות שנכשלו מסומנות ב-✗ אדום

## סה"כ בדיקות

- **סה"כ בקשות:** 25+
- **סה"כ בדיקות:** 100+
- **כיסוי:** כל ה-endpoints + מקרי שגיאה

## הערות חשובות

1. **סדר הרצה:** חשוב להריץ את הבקשות בסדר הנכון (הרשמה → התחברות → נכסים)
2. **משתני סביבה:** הטוקן והמזהים נשמרים אוטומטית לאחר הרשמה/התחברות
3. **בדיקות שגיאה:** חלק מהבדיקות דורשות שהמשתמש כבר יהיה קיים (למשל, בדיקת אימייל קיים)
4. **מחיקת משתמש:** אם תריץ את "מחיקת משתמש", תצטרך להירשם מחדש

## שיפורים עתידיים אפשריים

- [ ] בדיקות ביצועים (load testing)
- [ ] בדיקות אבטחה מתקדמות
- [ ] בדיקות אינטגרציה בין endpoints
- [ ] בדיקות עם נתונים אקראיים
- [ ] בדיקות concurrent requests

